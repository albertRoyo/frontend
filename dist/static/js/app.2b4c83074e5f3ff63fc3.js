webpackJsonp([1],{"9RkC":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Tqaz"),n=(a("sWs5"),a("7+uW")),s={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]};var r=a("VU/8")({name:"App"},s,!1,function(t){a("9RkC")},null,null).exports,o=a("/ocq"),d=a("mtWM"),l=a.n(d),c={data:function(){return{component:"login",events:[{image:""},{image:""}],events_added:[],event_actual:{},event_to_modify:null,show_cart:!1,add_new_event:!1,modify_event:!1,add_artist:!1,del_artist:!1,money_purchase:0,user_money_tickets:[{username:"",available_money:0,total_tickets:0}],user:{username:"",logged:!1,is_admin:0,token:null},addEventForm:{place:"",name:"",city:"",date:"",price:"",total_available_tickets:""},editEventForm:{id:"",name:"",place:"",city:"",date:"",price:"",total_available_tickets:""},addArtistForm:{id:"",name:"",country:"",genre:""},deleteArtistForm:{id:""},images:["https://ep01.epimg.net/elpais/imagenes/2019/07/03/estilo/1562141943_716738_1562142230_noticia_normal.jpg","https://fotografias.lasexta.com/clipping/cmsimages02/2018/04/20/B22581CB-ADAE-4C9E-9D90-4A2427F31435/58.jpg","https://sonarplusd.com/system/attached_images/27370/medium/FatboySlim_SonarClub_sonar2016_Leafhopper_006.jpg?1554395672","https://image.ondacero.es/clipping/cmsimages02/2020/04/01/3E1027B0-6D5C-41EF-8625-F138A31FD416/27.jpg","https://lh3.googleusercontent.com/proxy/8XEEKUZb4h3SJxAylCj6HSo0PsASyg_B_XSZ_yFuuJwYd3vQofi1jA0WAI-X_Kep1wHKV87f2C31Eg-mHkdBvuN2nGYlIRcn-34sSniGA0pd9SUUdOqWYzZOQeouf2AxxUFFiCGuqvlmRsxA-lfjFTiofoRRE3BqrdT671SC7_l8xl-_PzNFZAxD95A_ESI4BonWcotI","https://estaticos.elperiodico.com/resources/jpg/0/4/sardana-punts-lliures-palacete-albeniz-1474729318940.jpg","https://img.vixdata.io/pd/jpg-large/es/sites/default/files/btg/musica.batanga.com/files/Los-9-tipos-de-fans-que-siempre-encuentras-en-un-concierto-de-rock%20(copia).jpg","https://www.directivosyempresas.com/wp-content/uploads/2020/01/seguridad-social-actuara%CC%81-en-oh-my-club-de-madrid-680x365_c.jpg"]}},methods:{updateEventActual:function(t){for(var e=0;e<this.events.length;e++)this.events[e].id===t&&(this.event_actual=this.events[e])},login:function(){this.$router.replace({path:"/userlogin"})},logout:function(){this.user.logged=this.show_cart=this.add_new_event=this.modify_event=this.add_artist=this.del_artist=!1,this.$router.replace({path:"/",query:{logged:this.user.logged}})},getEvent:function(t){for(var e=0;e<this.events.length;e++)if(this.events[e].id===t)return this.events[e]},showCart:function(){this.show_cart=!1===this.show_cart},showAddEvent:function(){this.add_new_event=!1===this.add_new_event},showModifyEvent:function(){this.modify_event=!1===this.modify_event},incQuant:function(t){var e=!1,a=void 0;for(a=0;a<this.events_added.length&&!e;a++)this.events_added[a].event_id===t.id&&(this.events_added[a].tickets_bought+=1,e=!0);if(!e){var i={event_id:t.id,tickets_bought:1};this.events_added.push(i)}this.user_money_tickets[0].total_tickets+=1,this.money_purchase+=t.price},decQuant:function(t){for(var e=0;e<this.events_added.length;e++)this.events_added[e].event_id===t.id&&(this.events_added[e].tickets_bought>1?this.events_added[e].tickets_bought-=1:this.events_added.splice(e,1));this.user_money_tickets[0].total_tickets-=1,this.money_purchase-=t.price},deleteQuant:function(t){for(var e=0;e<this.events_added.length;e++)this.events_added[e].event_id===t.id&&(this.user_money_tickets[0].total_tickets-=this.events_added[e].tickets_bought,this.money_purchase-=this.events_added[e].tickets_bought*t.price,this.events_added.splice(e,1))},finalizePurchase:function(){if(this.user_money_tickets[0].available_money>=this.money_purchase){for(var t=0;t<this.events_added.length;t++){var e={event_id:this.events_added[t].event_id,tickets_bought:this.events_added[t].tickets_bought};this.addPurchase(e)}this.events_added=[],this.user_money_tickets[0].total_tickets=0,this.user_money_tickets[0].available_money-=this.money_purchase,this.money_purchase=0,alert("Order done")}else alert("You have not enough money for this purchase")},addPurchase:function(t){var e="https://a10-eventright.herokuapp.com/orders/"+this.user.username;l.a.post(e,t,{auth:{username:this.user.token}}).then(function(){}).catch(function(t){console.log(t)})},onSubmit:function(){var t={name:this.addEventForm.name,place:this.addEventForm.place,city:this.addEventForm.city,date:this.addEventForm.date,price:this.addEventForm.price,total_available_tickets:this.addEventForm.total_available_tickets};this.addEvent(t)},addEvent:function(t){var e=this;l.a.post("https://a10-eventright.herokuapp.com/event",t,{auth:{username:this.user.token}}).then(function(){alert("Event added"),e.initFormNew(),e.getEvents()}).catch(function(t){alert("Fill all the gaps and try again"),console.log(t)})},initFormNew:function(){this.addEventForm.place="",this.addEventForm.name="",this.addEventForm.city="",this.addEventForm.date="",this.addEventForm.price="",this.addEventForm.total_available_tickets=""},onResetNew:function(t){var e=this;t.preventDefault(),this.initFormNew(),this.add_new_event=!1,this.$nextTick(function(){e.add_new_event=!0})},onSubmitUpdate:function(){var t={name:this.editEventForm.name,place:this.editEventForm.place,city:this.editEventForm.city,date:this.editEventForm.date,price:this.editEventForm.price,total_available_tickets:this.editEventForm.total_available_tickets};this.updateEvent(t)},updateEvent:function(t){var e=this,a="https://a10-eventright.herokuapp.com/event/"+this.editEventForm.id;l.a.put(a,t,{auth:{username:this.user.token}}).then(function(){alert("Event modified"),e.initFormUpdate(),e.getEvents()}).catch(function(t){console.log(t)})},initFormUpdate:function(){this.editEventForm.id="",this.editEventForm.name="",this.editEventForm.place="",this.editEventForm.city="",this.editEventForm.date="",this.editEventForm.price="",this.editEventForm.total_available_tickets=""},onResetUpdate:function(t){var e=this;t.preventDefault(),this.initFormUpdate(),this.modify_event=!1,this.$nextTick(function(){e.modify_event=!0})},eventWhereModifyArtist:function(t){this.event_to_modify=t,this.add_artist=!0},onSubmitAddArtistInEvent:function(){var t={name:this.addArtistForm.name,country:this.addArtistForm.country,genre:this.addArtistForm.genre};this.addNewArtist(t),this.addArtistInEvent(t)},addNewArtist:function(t){l.a.post("https://a10-eventright.herokuapp.com/artist",t,{auth:{username:this.user.token}}).then(function(){}).catch(function(t){console.log(t)})},addArtistInEvent:function(t){var e=this,a="https://a10-eventright.herokuapp.com/event/"+this.event_to_modify.id+"/artist";l.a.post(a,t,{auth:{username:this.user.token}}).then(function(){alert("Artist added to event"),e.initFormAddArtist()}).catch(function(t){alert("The artist is already in this event or the genre does not exist"),console.log(t)})},initFormAddArtist:function(){this.addArtistForm.id="",this.addArtistForm.name="",this.addArtistForm.country="",this.addArtistForm.genre=""},onResetAddArtist:function(t){var e=this;t.preventDefault(),this.initFormAddArtist(),this.add_artist=!1,this.$nextTick(function(){e.add_artist=!0})},eventWhereDeleteArtist:function(t){this.event_to_modify=t,this.del_artist=!0},onSubmitDeleteArtistInEvent:function(){this.deleteArtistInEvent()},deleteArtistInEvent:function(){var t=this,e="https://a10-eventright.herokuapp.com/event/"+this.event_to_modify.id+"/artist/"+this.deleteArtistForm.id;l.a.delete(e,{auth:{username:this.user.token}}).then(function(){alert("Artist deleted"),t.initFormDelArtist()}).catch(function(t){alert("Problem has occurred: "+t),console.log(t)})},initFormDelArtist:function(){this.deleteArtistForm.id=""},onResetDeleteArtist:function(t){var e=this;t.preventDefault(),this.initFormDelArtist(),this.add_new_event=!1,this.$nextTick(function(){e.add_new_event=!0})},getEvents:function(){var t=this;l.a.get("https://a10-eventright.herokuapp.com/events").then(function(e){t.events=e.data.events,t.addImages()}).catch(function(t){console.error(t)})},eventToDelete:function(t){this.event_to_modify=t,this.deleteEvent()},deleteEvent:function(){var t=this,e="https://a10-eventright.herokuapp.com/event/"+this.event_to_modify.id;l.a.delete(e,{auth:{username:this.user.token}}).then(function(){alert("Event deleted"),t.getEvents()}).catch(function(t){alert("Try reconect again"),console.log(t)})},addImages:function(){for(var t=0;t<this.events.length;t++)this.events[t].image=this.images[t]}},created:function(){this.getEvents(),this.user.username=this.$route.query.username,this.user.logged=this.$route.query.logged,this.user.is_admin=this.$route.query.is_admin,this.user.token=this.$route.query.token,this.user_money_tickets[0].username=this.user.username,this.user_money_tickets[0].available_money=this.$route.query.money,this.money_purchase=0}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("nav",{staticClass:"navbar navbar-dark"},[a("h2",{staticStyle:{color:"#d3d9df"}},[t._v("FestiFinder")]),t._v(" "),t.user.logged?a("div",{attrs:{id:"navbarLogged"}},[t._l(t.user_money_tickets,function(e){return a("div",{key:e.username},[a("div",{staticClass:"navbar-nav",staticStyle:{position:"absolute",left:"70%",color:"#d3d9df"}},[a("div",{staticClass:"dropdown",staticStyle:{position:"absolute"}},[a("button",{staticClass:"btn btn-secondary dropdown-toggle",staticStyle:{width:"170px"},attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"false","aria-expanded":"false"}},[t._v("\n              "+t._s(e.username)+"\n              "),a("span",{staticClass:"caret"})]),t._v(" "),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},[a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Total tickets: "+t._s(e.total_tickets))]),t._v(" "),a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Money available: "+t._s(e.available_money))])])])])])}),t._v(" "),0===t.user.is_admin?a("button",{staticClass:"btn btn-outline-light floated",on:{click:t.showCart}},[t._v(" Cart 🛒")]):t._e(),t._v(" "),a("button",{staticClass:"btn btn-outline-light floated",on:{click:t.logout}},[t._v(" Logout ")])],2):a("div",[a("div",{staticClass:"navbar-nav"},[a("button",{staticClass:"btn btn-outline-light",on:{click:t.login}},[t._v(" Login ")])])])]),a("br"),a("br"),t._v(" "),t.show_cart?[a("thead",{staticStyle:{"border-bottom":"5px solid #000"}},[t._m(0),t._v(" "),t._l(t.events_added,function(e){return a("tr",{directives:[{name:"onfocus",rawName:"v-onfocus",value:t.updateEventActual(e.event_id),expression:"updateEventActual(event.event_id)"}],key:e.event_id},[a("td",[t._v(t._s(t.event_actual.name))]),t._v(" "),a("td",[t._v("\n          "+t._s(e.tickets_bought)+"\n          "),a("button",{staticClass:"btn b-icon btn-sm",on:{click:function(a){t.decQuant(t.getEvent(e.event_id))}}},[t._v("-")]),t._v(" "),a("button",{staticClass:"btn b-icon btn-sm",on:{click:function(a){t.incQuant(t.getEvent(e.event_id))}}},[t._v("+")])]),t._v(" "),a("td",[t._v(t._s(t.event_actual.price)+" ")]),t._v(" "),a("td",[t._v(t._s(t.event_actual.price*e.tickets_bought)+" €")]),t._v(" "),a("button",{staticClass:"btn btn-danger",on:{click:function(a){t.deleteQuant(t.getEvent(e.event_id))}}},[t._v("Delete ticket")])])})],2),t._v(" "),a("hr",{staticStyle:{width:"500px","margin-left":"0"}}),t._v(" "),t.money_purchase>0?a("div",{staticStyle:{position:"absolute",left:"270px","font-weight":"bold"}},[t._v("Total : "+t._s(t.money_purchase)+"€")]):t._e(),a("br"),a("br"),t._v(" "),a("div",{staticStyle:{width:"max-content",left:"50%"}},[a("button",{staticClass:"btn btn-lg",on:{click:t.showCart}},[t._v("Back")]),t._v(" "),a("button",{staticClass:"btn btn-success btn-lg",on:{click:t.finalizePurchase}},[t._v("Finalize purchase")])])]:t.add_new_event?[a("b-card",{staticStyle:{width:"250px",margin:"auto",overflow:"hidden"}},[a("h3",[t._v(" Add new event")]),t._v(" "),a("button",{staticClass:"btn btn-outline-dark btn-sm",staticStyle:{"margin-block-end":"10px",position:"absolute",top:"0",right:"0"},on:{click:function(e){t.add_new_event=!1}}},[t._v("x")]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("label",{staticStyle:{float:"left","margin-bottom":"0","margin-top":"10px"},attrs:{for:"inputName"}},[t._v("Name:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addEventForm.name,expression:"addEventForm.name"}],staticStyle:{width:"200px"},attrs:{type:"username",id:"inputName",placeholder:"Enter event name",required:"",autofocus:""},domProps:{value:t.addEventForm.name},on:{input:function(e){e.target.composing||t.$set(t.addEventForm,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("label",{staticStyle:{float:"left","margin-bottom":"0","margin-top":"10px"},attrs:{for:"inputPrice"}},[t._v("Price:")]),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addEventForm.price,expression:"addEventForm.price"}],staticStyle:{width:"200px"},attrs:{type:"username",id:"inputPrice",placeholder:"Enter price",required:"",autofocus:""},domProps:{value:t.addEventForm.price},on:{input:function(e){e.target.composing||t.$set(t.addEventForm,"price",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("label",{staticStyle:{float:"left","margin-bottom":"0","margin-top":"10px"},attrs:{for:"inputDate"}},[t._v("Date:")]),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addEventForm.date,expression:"addEventForm.date"}],staticStyle:{width:"200px"},attrs:{type:"username",id:"inputDate",placeholder:"Enter date",required:"",autofocus:""},domProps:{value:t.addEventForm.date},on:{input:function(e){e.target.composing||t.$set(t.addEventForm,"date",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("label",{staticStyle:{float:"left","margin-bottom":"0","margin-top":"10px"},attrs:{for:"inputCity"}},[t._v("City:")]),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addEventForm.city,expression:"addEventForm.city"}],staticStyle:{width:"200px"},attrs:{type:"username",id:"inputCity",placeholder:"Enter city",required:"",autofocus:""},domProps:{value:t.addEventForm.city},on:{input:function(e){e.target.composing||t.$set(t.addEventForm,"city",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("label",{staticStyle:{float:"left","margin-bottom":"0","margin-top":"10px"},attrs:{for:"inputPlace"}},[t._v("Place:")]),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addEventForm.place,expression:"addEventForm.place"}],staticStyle:{width:"200px"},attrs:{type:"username",id:"inputPlace",placeholder:"Enter place",required:"",autofocus:""},domProps:{value:t.addEventForm.place},on:{input:function(e){e.target.composing||t.$set(t.addEventForm,"place",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("label",{staticStyle:{float:"left","margin-bottom":"0","margin-top":"10px"},attrs:{for:"inputTickets"}},[t._v("Tickets:")]),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addEventForm.total_available_tickets,expression:"addEventForm.total_available_tickets"}],staticStyle:{width:"200px"},attrs:{type:"username",id:"inputTickets",placeholder:"Enter ticket",required:"",autofocus:""},domProps:{value:t.addEventForm.total_available_tickets},on:{input:function(e){e.target.composing||t.$set(t.addEventForm,"total_available_tickets",e.target.value)}}})]),t._v(" "),a("br"),t._v(" "),a("button",{staticClass:"btn btn-primary",on:{click:t.onSubmit}},[t._v("Submit")]),t._v(" "),a("button",{staticClass:"btn btn-outline-dark",on:{click:t.onResetNew}},[t._v("Reset")])])]:t.modify_event?[a("b-card",{staticStyle:{width:"250px",margin:"auto"}},[a("h3",[t._v(" Modify event")]),t._v(" "),a("button",{staticClass:"btn btn-outline-dark btn-sm",staticStyle:{"margin-block-end":"10px",position:"absolute",top:"0",right:"0"},on:{click:function(e){t.modify_event=!1}}},[t._v("x")]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("label",{staticStyle:{float:"left","margin-bottom":"0","margin-top":"10px"},attrs:{for:"inputIdM"}},[t._v("Id:")]),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editEventForm.id,expression:"editEventForm.id"}],staticStyle:{width:"200px"},attrs:{type:"username",id:"inputIdM",placeholder:"Enter id",required:"",autofocus:""},domProps:{value:t.editEventForm.id},on:{input:function(e){e.target.composing||t.$set(t.editEventForm,"id",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("label",{staticStyle:{float:"left","margin-bottom":"0","margin-top":"10px"},attrs:{for:"inputName"}},[t._v("Name:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editEventForm.name,expression:"editEventForm.name"}],staticStyle:{width:"200px"},attrs:{type:"username",id:"inputNameM",placeholder:"Enter event name",required:"",autofocus:""},domProps:{value:t.editEventForm.name},on:{input:function(e){e.target.composing||t.$set(t.editEventForm,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("label",{staticStyle:{float:"left","margin-bottom":"0","margin-top":"10px"},attrs:{for:"inputPriceM"}},[t._v("Price:")]),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editEventForm.price,expression:"editEventForm.price"}],staticStyle:{width:"200px"},attrs:{type:"username",id:"inputPriceM",placeholder:"Enter price",required:"",autofocus:""},domProps:{value:t.editEventForm.price},on:{input:function(e){e.target.composing||t.$set(t.editEventForm,"price",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("label",{staticStyle:{float:"left","margin-bottom":"0","margin-top":"10px"},attrs:{for:"inputDateM"}},[t._v("Date:")]),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editEventForm.date,expression:"editEventForm.date"}],staticStyle:{width:"200px"},attrs:{type:"username",id:"inputDateM",placeholder:"Enter date",required:"",autofocus:""},domProps:{value:t.editEventForm.date},on:{input:function(e){e.target.composing||t.$set(t.editEventForm,"date",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("label",{staticStyle:{float:"left","margin-bottom":"0","margin-top":"10px"},attrs:{for:"inputCityM"}},[t._v("City:")]),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editEventForm.city,expression:"editEventForm.city"}],staticStyle:{width:"200px"},attrs:{type:"username",id:"inputCityM",placeholder:"Enter city",required:"",autofocus:""},domProps:{value:t.editEventForm.city},on:{input:function(e){e.target.composing||t.$set(t.editEventForm,"city",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("label",{staticStyle:{float:"left","margin-bottom":"0","margin-top":"10px"},attrs:{for:"inputPlaceM"}},[t._v("Place:")]),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editEventForm.place,expression:"editEventForm.place"}],staticStyle:{width:"200px"},attrs:{type:"username",id:"inputPlaceM",placeholder:"Enter place",required:"",autofocus:""},domProps:{value:t.editEventForm.place},on:{input:function(e){e.target.composing||t.$set(t.editEventForm,"place",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("label",{staticStyle:{float:"left","margin-bottom":"0","margin-top":"10px"},attrs:{for:"inputTicketsM"}},[t._v("Tickets:")]),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editEventForm.total_available_tickets,expression:"editEventForm.total_available_tickets"}],staticStyle:{width:"200px"},attrs:{type:"username",id:"inputTicketsM",placeholder:"Enter ticket",required:"",autofocus:""},domProps:{value:t.editEventForm.total_available_tickets},on:{input:function(e){e.target.composing||t.$set(t.editEventForm,"total_available_tickets",e.target.value)}}})]),t._v(" "),a("br"),t._v(" "),a("button",{staticClass:"btn btn-primary",on:{click:t.onSubmitUpdate}},[t._v("Modify event")]),t._v(" "),a("button",{staticClass:"btn btn-outline-dark",on:{click:t.onResetUpdate}},[t._v("Reset")])])]:t.add_artist?[a("b-card",{staticStyle:{width:"250px",margin:"auto"}},[a("h3",[t._v(" Add artist to event")]),t._v(" "),a("button",{staticClass:"btn btn-outline-dark btn-sm",staticStyle:{"margin-block-end":"10px",position:"absolute",top:"0",right:"0"},on:{click:function(e){t.add_artist=!1}}},[t._v("x")]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("label",{staticStyle:{float:"left","margin-bottom":"0","margin-top":"10px"},attrs:{for:"inputNameAristAdd"}},[t._v("Name:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addArtistForm.name,expression:"addArtistForm.name"}],staticStyle:{width:"200px"},attrs:{type:"username",id:"inputNameAristAdd",placeholder:"Enter artist name",required:"",autofocus:""},domProps:{value:t.addArtistForm.name},on:{input:function(e){e.target.composing||t.$set(t.addArtistForm,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("label",{staticStyle:{float:"left","margin-bottom":"0","margin-top":"10px"},attrs:{for:"inputCityArtistAdd"}},[t._v("Country:")]),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addArtistForm.country,expression:"addArtistForm.country"}],staticStyle:{width:"200px"},attrs:{type:"username",id:"inputCityArtistAdd",placeholder:"Enter country",required:"",autofocus:""},domProps:{value:t.addArtistForm.country},on:{input:function(e){e.target.composing||t.$set(t.addArtistForm,"country",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("label",{staticStyle:{float:"left","margin-bottom":"0","margin-top":"10px"},attrs:{for:"inputGenreArtistAdd"}},[t._v("Genre:")]),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addArtistForm.genre,expression:"addArtistForm.genre"}],staticStyle:{width:"200px"},attrs:{type:"username",id:"inputGenreArtistAdd",placeholder:"Enter genre",required:"",autofocus:""},domProps:{value:t.addArtistForm.genre},on:{input:function(e){e.target.composing||t.$set(t.addArtistForm,"genre",e.target.value)}}}),t._v("\n        Write one of this genres: [REGGAE, POP, TRAP, HIP HOP, ROCK, INDIE, HEAVY, ELECTRONIC, OTHER]\n      ")]),t._v(" "),a("br"),t._v(" "),a("button",{staticClass:"btn btn-primary",on:{click:t.onSubmitAddArtistInEvent}},[t._v("Add artist")]),t._v(" "),a("button",{staticClass:"btn btn-outline-dark",on:{click:t.onResetAddArtist}},[t._v("Reset")])])]:t.del_artist?[a("b-card",{staticStyle:{width:"250px",margin:"auto"}},[a("h3",[t._v(" Delete artist from event")]),t._v(" "),a("button",{staticClass:"btn btn-outline-dark btn-sm",staticStyle:{"margin-block-end":"10px",position:"absolute",top:"0",right:"0"},on:{click:function(e){t.del_artist=!1}}},[t._v("x")]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("label",{staticStyle:{float:"left","margin-bottom":"0","margin-top":"10px"},attrs:{for:"inputIdArtist"}},[t._v("Id:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.deleteArtistForm.id,expression:"deleteArtistForm.id"}],staticStyle:{width:"200px"},attrs:{type:"username",id:"inputIdArtist",placeholder:"Enter artist id",required:"",autofocus:""},domProps:{value:t.deleteArtistForm.id},on:{input:function(e){e.target.composing||t.$set(t.deleteArtistForm,"id",e.target.value)}}})]),t._v(" "),a("br"),t._v(" "),a("button",{staticClass:"btn btn-danger",on:{click:t.onSubmitDeleteArtistInEvent}},[t._v("Delete artist")]),t._v(" "),a("button",{staticClass:"btn btn-outline-dark",on:{click:t.onResetDeleteArtist}},[t._v("Reset")])])]:[t.user.logged&&1===t.user.is_admin?a("div",[a("button",{staticClass:"btn btn-dark",staticStyle:{"margin-right":"0"},on:{click:t.showAddEvent}},[t._v(" Add new event ")]),t._v(" "),a("button",{staticClass:"btn btn-outline-dark",on:{click:t.showModifyEvent}},[t._v(" Modify event ")]),a("br"),a("br")]):t._e(),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"row"},t._l(t.events,function(e){return a("div",{key:e.id,staticClass:"col-lg-4 col-md-6 mb-4"},[a("br"),t._v(" "),a("b-card",{staticClass:"mb-2",staticStyle:{"max-width":"20rem"},attrs:{title:e.name,"img-src":e.image,"img-alt":"Image","img-top":"","img-height":"200px"}},[a("b-card-text",[a("p",{staticClass:"card-text"},[t._v(t._s(e.city))]),t._v(" "),a("p",{staticClass:"card-text"},[t._v(t._s(e.place))]),t._v(" "),a("p",{staticClass:"card-text"},[t._v(t._s(e.date))]),t._v(" "),a("p",{staticClass:"card-text"},[t._v(t._s(e.price)+" €")]),t._v(" "),a("p",{staticClass:"card-text"},[t._v("Tickets left: "+t._s(e.total_available_tickets)+" ")])]),t._v(" "),t.user.logged&&0===t.user.is_admin?a("button",{staticClass:"btn btn-secondary",staticStyle:{"margin-bottom":"10px",width:"150px"},on:{click:function(a){return t.incQuant(e)}}},[t._v("Add to cart")]):t._e(),a("br"),t._v(" "),t.user.logged&&1===t.user.is_admin?a("button",{staticClass:"btn btn-secondary",staticStyle:{"margin-bottom":"10px",width:"150px"},on:{click:function(a){return t.eventWhereModifyArtist(e)}}},[t._v("Add artist")]):t._e(),a("br"),t._v(" "),t.user.logged&&1===t.user.is_admin?a("button",{staticClass:"btn btn-secondary",staticStyle:{"margin-bottom":"10px",width:"150px"},on:{click:function(a){return t.eventWhereDeleteArtist(e)}}},[t._v("Delete artist")]):t._e(),a("br"),t._v(" "),t.user.logged&&1===t.user.is_admin?a("button",{staticClass:"btn btn-outline-danger",staticStyle:{"margin-bottom":"10px",width:"150px"},on:{click:function(a){return t.eventToDelete(e)}}},[t._v("Delete event")]):t._e(),a("br")],1)],1)}),0)])],t._v(" "),t.show_cart||t.add_new_event||t.modify_event||t.del_artist||t.add_artist?t._e():a("footer",[t._m(1),t._v(" "),a("p",[t._v("\n      © 2020 FestiFinder FrontEnd, Inc\n    ")]),t._v(" "),a("p",[t._v("\n      Authors: Joan Travé, Albert Royo\n    ")])])],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("th",[this._v("Event Name")]),this._v(" "),e("th",[this._v("Quantity")]),this._v(" "),e("th",[this._v("Price(€)")]),this._v(" "),e("th",[this._v("Total")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("\n      Stay up to date on new events with our telegram bot at:\n      "),e("a",{attrs:{href:"https://t.me/a10events",target:"_blank"}},[this._v("https://t.me/a10events")])])}]};var m=a("VU/8")(c,u,!1,function(t){a("mSQO")},null,null).exports,v={data:function(){return{create_account:!1,account:{},user:{username:"",password:"",is_admin:0,token:"",logged:!1,available_money:0},addUserForm:{username:"",password:""}}},methods:{initForm:function(){this.addUserForm.username="",this.addUserForm.password=""},resetParam:function(){this.initForm()},checkLogin:function(){var t=this,e={username:this.user.username,password:this.user.password};l.a.post("https://a10-eventright.herokuapp.com/login",e).then(function(e){t.user.logged=!0,t.user.token=e.data.token,t.getAccount(),alert("Logged in as "+t.user.username)}).catch(function(e){console.error(e),t.user.username="",alert("Username or Password incorrect")})},getAccount:function(){var t=this,e="https://a10-eventright.herokuapp.com/account/"+this.user.username;l.a.get(e,{auth:{username:this.user.token}}).then(function(e){t.account=e.data.account,t.$router.replace({path:"/",query:{username:t.user.username,logged:t.user.logged,is_admin:t.account.is_admin,money:t.account.available_money,token:t.user.token}})}).catch(function(t){console.error(t)})},onSubmit:function(){var t=this,e={username:this.addUserForm.username,password:this.addUserForm.password,is_admin:0,available_money:500};l.a.post("https://a10-eventright.herokuapp.com/account/"+e.username,e).then(function(e){alert("Account created!"),t.initForm(),t.$router.replace({path:"/"})}).catch(function(a){console.error(a),t.user.username="",alert("Username "+e.username+" already exists or password too weak()")})},backToEvents:function(){this.user.logged=!1,this.$router.replace({path:"/",query:{logged:this.user.logged}})}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"align-content":"center",float:"inside"},attrs:{id:"app"}},[t.create_account?t._e():[a("h1",[t._v(" Sing in")]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("label",{attrs:{for:"inputUsername"}},[t._v("Username:")]),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],attrs:{type:"username",id:"inputUsername",placeholder:"Username",required:"",autofocus:""},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("label",{attrs:{for:"inputPassword"}},[t._v("Password:")]),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticStyle:{"margin-block-end":"10px"},attrs:{type:"password",id:"inputPassword",placeholder:"Password",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]),t._v(" "),a("button",{staticClass:"btn btn-primary",staticStyle:{"margin-block-end":"10px",width:"300px"},on:{click:t.checkLogin}},[t._v("SING IN")]),a("br"),t._v(" "),a("button",{staticClass:"btn btn-success",staticStyle:{"margin-block-end":"10px",width:"300px"},on:{click:function(e){t.create_account=!0}}},[t._v("CREATE ACCOUNT")]),a("br"),t._v(" "),a("button",{staticClass:"btn",staticStyle:{"margin-block-end":"10px",width:"300px"},on:{click:t.backToEvents}},[t._v("BACK TO EVENTS")]),a("br")],t._v(" "),t.create_account?[a("h3",[t._v(" Create account")]),t._v(" "),a("button",{staticClass:"btn btn-outline-dark btn-sm",staticStyle:{"margin-block-end":"10px",position:"absolute",top:"0",right:"0"},on:{click:function(e){t.create_account=!1}}},[t._v("x")]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("label",{attrs:{for:"inputUsername"}},[t._v("Username:")]),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addUserForm.username,expression:"addUserForm.username"}],attrs:{type:"username",id:"inputUsernameCreate",placeholder:"Username",required:"",autofocus:""},domProps:{value:t.addUserForm.username},on:{input:function(e){e.target.composing||t.$set(t.addUserForm,"username",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("label",{attrs:{for:"inputPassword"}},[t._v("Password:")]),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addUserForm.password,expression:"addUserForm.password"}],staticStyle:{"margin-block-end":"10px"},attrs:{type:"password",id:"inputPasswordCreate",placeholder:"Password",required:""},domProps:{value:t.addUserForm.password},on:{input:function(e){e.target.composing||t.$set(t.addUserForm,"password",e.target.value)}}})]),t._v(" "),a("button",{staticClass:"btn btn-primary",staticStyle:{"margin-block-end":"10px",width:"300px"},on:{click:t.onSubmit}},[t._v("Submit")]),t._v(" "),a("button",{staticClass:"btn btn-danger",staticStyle:{"margin-block-end":"10px",width:"300px"},on:{click:t.resetParam}},[t._v("Reset")])]:t._e()],2)},staticRenderFns:[]};var _=a("VU/8")(v,p,!1,function(t){a("XlPF")},null,null).exports;a("K3J8");n.default.use(o.a);var h=new o.a({mode:"history",base:Object({NODE_ENV:"production"}).BASE_URL,routes:[{path:"/",name:"login",component:m},{path:"/userlogin",name:"Login",component:_}]});n.default.use(i.a),n.default.config.productionTip=!1,new n.default({router:h,render:function(t){return t(r)}}).$mount("#app")},XlPF:function(t,e){},mSQO:function(t,e){},sWs5:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.2b4c83074e5f3ff63fc3.js.map